#! /bin/sh
##########################################################################
#    (c) Copyright 2021-2025 JRCS Ltd - All Rights Reserved              #
##########################################################################

if test "${SYSLOG_SERVER}"
	then
		exec /bin/busybox syslogd -n -R ${SYSLOG_SERVER}
	fi

if test "${SYSLOG_STDOUT}" = "Y"
	then
		if test "${DEBUG_MODE}" = "Y"
			then
				exec /bin/busybox syslogd -n -O -
			else
				exec /bin/busybox syslogd -f /usr/local/etc/syslog_stdout.conf -n
			fi
	fi

mkdir -p /opt/data/logs

if test "${DEBUG_MODE}" = "Y"
	then
		exec /bin/busybox syslogd -n -b 9 -s 100000 -O /opt/data/logs/messages
	fi

exec /bin/busybox syslogd -f /usr/local/etc/syslog.conf -n
